services:
    reverse-proxy:
        image: aliasvault-reverse-proxy
        build:
            context: .
            dockerfile: Dockerfile

    client:
        image: aliasvault-client
        build:
            context: .
            dockerfile: src/AliasVault.Client/Dockerfile

    api:
        image: aliasvault-api
        build:
            context: .
            dockerfile: src/AliasVault.Api/Dockerfile

    admin:
        image: aliasvault-admin
        build:
            context: .
            dockerfile: src/AliasVault.Admin/Dockerfile

    smtp:
        image: aliasvault-smtp
        build:
            context: .
            dockerfile: src/Services/AliasVault.SmtpService/Dockerfile

    task-runner:
        image: aliasvault-task-runner
        build:
            context: .
            dockerfile: src/Services/AliasVault.TaskRunner/Dockerfile

    postgres:
        image: aliasvault-postgres
        build:
            context: .
            dockerfile: Dockerfile.postgres
        ports:
            - "5432:5432"
        volumes:
            - ./database/postgres:/var/lib/postgresql/data:rw
        environment:
            POSTGRES_DB: aliasvault
            POSTGRES_USER: aliasvault
            POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
